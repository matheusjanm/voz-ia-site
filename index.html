<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <!-- (head igual ao seu, mantido) -->
</head>
<body>
  <nav class="menu">
    <h2>Menu</h2>
    <label>
      <input type="checkbox" id="temaToggle" /> Tema Escuro
    </label>
    <label>
      <input type="radio" name="menuSelect" value="leitor" checked /> Leitor de Texto
    </label>
    <label>
      <input type="radio" name="menuSelect" value="conversor" /> Converter MP4 → MP3
    </label>
    <label>
      <input type="radio" name="menuSelect" value="transcricao" /> Transcrever Áudio/Vídeo
    </label>
  </nav>

  <main class="container">
    <!-- Leitor de Texto -->
    <section id="leitorSection" class="main-area">
      <!-- ...mesmo conteúdo... -->
    </section>

    <!-- Conversor de vídeo -->
    <section id="conversorSection" class="main-area" style="display:none;">
      <!-- ...mesmo conteúdo... -->
    </section>

    <!-- NOVO: Transcrição de áudio/vídeo -->
    <section id="transcricaoSection" class="main-area" style="display:none;">
      <h2>Transcrever Áudio/Vídeo para Texto</h2>
      <form id="transcricaoForm">
        <input type="file" id="audioInput" accept="audio/*,video/*" required />
        <button type="submit">Transcrever</button>
      </form>
      <div id="transcricaoResultado" style="margin-top:15px; font-weight:600; white-space:pre-wrap;"></div>
    </section>
  </main>

  <script>
    // ... (script já existente mantido) ...

    const transcricaoSection = document.getElementById("transcricaoSection");
    const transcricaoForm = document.getElementById("transcricaoForm");
    const transcricaoResultado = document.getElementById("transcricaoResultado");

    menuRadios.forEach((radio) => {
      radio.addEventListener("change", () => {
        leitorSection.style.display = "none";
        conversorSection.style.display = "none";
        transcricaoSection.style.display = "none";

        if (radio.value === "leitor") leitorSection.style.display = "flex";
        else if (radio.value === "conversor") conversorSection.style.display = "flex";
        else if (radio.value === "transcricao") transcricaoSection.style.display = "flex";
      });
    });

    // Transcrição de áudio ou vídeo
    transcricaoForm?.addEventListener("submit", async (e) => {
      e.preventDefault();
      transcricaoResultado.textContent = "Transcrevendo...";
      const file = document.getElementById("audioInput").files[0];
      if (!file) return;

      const formData = new FormData();
      formData.append("media", file);

      try {
        const resposta = await fetch("http://localhost:3000/api/transcrever", {
          method: "POST",
          body: formData,
        });

        const dados = await resposta.json();
        transcricaoResultado.textContent = dados.texto || "Não foi possível transcrever.";
      } catch (err) {
        transcricaoResultado.textContent = "Erro ao transcrever: " + err.message;
      }
    });
  </script>
</body>
</html>
